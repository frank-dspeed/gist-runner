<template bindable="import,new,user">
  <require from="./ga-custom-attribute"></require>

  <span class="logo">
    <span class="word-gist">Gist</span><span class="word-run">Run</span>
  </span>

  <form class="gist-loader"
        submit.delegate="import({ urlOrId: urlOrIdInput.value})"
        ga
        ga-category="header"
        ga-action="import">
    <div class="input-group">
      <input class="form-control input-sm"
             style="width: 220px"
             type="text"
             placeholder="Gist/Plunker/jsFiddle/CodePen URL..."
             ref="urlOrIdInput">
      <span class="input-group-button">
        <button class="btn btn-sm" type="submit">
          <svg class="octicon"
               width="16"
               height="16">
            <use xlink:href="img/icons.svg#icon-repo-pull"></use>
          </svg>
        </button>
      </span>
    </div>
  </form>

  <button class="btn btn-sm"
          type="button"
          click.delegate="new()"
          ga
          ga-category="nav-panel"
          ga-action="new">
    New Gist
  </button>

  <button class="btn btn-sm"
          type="button"
          show.bind="!user.authenticated"
          disabled.bind="user.loading"
          click.delegate="user.signIn()"
          ga
          ga-category="header"
          ga-action="sign-in">
    Sign In
  </button>

  <a class="tooltipped tooltipped-sw"
     href="https://gist.github.com/${user.login}"
     target="_blank"
     if.bind="user.authenticated"
     aria-label="Signed in as ${user.login}"
     ga
     ga-category="header"
     ga-action="avatar">
    <img class="avatar avatar-small"
         src.bind="user.avatar_url"
         width="26"
         height="26">
  </a>
</template>
